# üöÄ UPGRADE GUIDE - Environment Variables & ML Model

## –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ

### ‚úÖ –°–¢–™–ü–ö–ê 1: Environment Variables (.env) - –ó–ê–í–™–†–®–ï–ù–ê

**–ö–∞–∫–≤–æ –±–µ—à–µ –Ω–∞–ø—Ä–∞–≤–µ–Ω–æ:**
- –°—ä–∑–¥–∞–¥–µ–Ω `.env.example` —Ñ–∞–π–ª —Å —à–∞–±–ª–æ–Ω
- –°—ä–∑–¥–∞–¥–µ–Ω —Ä–µ–∞–ª–µ–Ω `.env` —Ñ–∞–π–ª —Å credentials
- –û–±–Ω–æ–≤–µ–Ω `bot.py` –∑–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –æ—Ç `.env`
- –î–æ–±–∞–≤–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏
- `.env` –∏ `.pkl` –¥–æ–±–∞–≤–µ–Ω–∏ –≤ `.gitignore`

**–†–µ–∑—É–ª—Ç–∞—Ç:**
- ‚úÖ Tokens –≤–µ—á–µ –ù–ï —Å–∞ hardcoded –≤ –∫–æ–¥–∞
- ‚úÖ `.env` —Ñ–∞–π–ª –µ –∑–∞—â–∏—Ç–µ–Ω –æ—Ç GitHub commits
- ‚úÖ –õ–µ—Å–Ω–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ credentials –±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–¥–∞
- ‚úÖ Production-ready security

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à:**
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π .env —Ñ–∞–π–ª–∞
nano .env

# –ü—Ä–æ–º–µ–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ
TELEGRAM_BOT_TOKEN=your_new_token
OWNER_CHAT_ID=your_chat_id

# –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –±–æ—Ç–∞
systemctl restart crypto-bot
```

---

### ‚úÖ –°–¢–™–ü–ö–ê 2: ML Model (Machine Learning Predictor) - –ó–ê–í–™–†–®–ï–ù–ê

**–ö–∞–∫–≤–æ –±–µ—à–µ –Ω–∞–ø—Ä–∞–≤–µ–Ω–æ:**
- –°—ä–∑–¥–∞–¥–µ–Ω `ml_predictor.py` –º–æ–¥—É–ª —Å Random Forest –º–æ–¥–µ–ª
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `bot.py` –∑–∞ ML –ø—Ä–æ–≥–Ω–æ–∑–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª–∞ –æ—Ç `trading_journal.json`
- Feature extraction –æ—Ç 8 —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
- ML –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–∫–∞–∑–≤–∞ —Å–µ –≤ `/signal` –∫–æ–º–∞–Ω–¥–∞—Ç–∞

**Features –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ –æ—Ç ML:**
1. RSI (14)
2. MA(20) - Normalized
3. MA(50) - Normalized
4. Volume Ratio
5. Volatility
6. Confidence Score
7. BTC Correlation Strength
8. Sentiment Score

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∏:**
1. –ü—Ä–∏ –≤—Å–µ–∫–∏ —Ç—Ä–µ–π–¥ –¥–∞–Ω–Ω–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –≤ `trading_journal.json`
2. –°–ª–µ–¥ 50+ –∑–∞–≤—ä—Ä—à–µ–Ω–∏ —Ç—Ä–µ–π–¥–∞ ‚Üí ML –º–æ–¥–µ–ª –º–æ–∂–µ –¥–∞ —Å–µ —Ç—Ä–µ–π–Ω–∏
3. ML –º–æ–¥–µ–ª –∞–Ω–∞–ª–∏–∑–∏—Ä–∞ patterns –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–≤–∞ —É—Å–ø–µ—Ö
4. –ü—Ä–∏ –Ω–æ–≤ —Å–∏–≥–Ω–∞–ª ‚Üí ML –¥–∞–≤–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ (0-100%)
5. –ê–∫–æ ML –µ –º–Ω–æ–≥–æ —É–≤–µ—Ä–µ–Ω ‚Üí –∫–æ—Ä–µ–∫—Ü–∏—è –Ω–∞ confidence ¬±20%

**–†–µ–∑—É–ª—Ç–∞—Ç:**
- ü§ñ ML –ø—Ä–æ–≥–Ω–æ–∑–∏ –ø–æ–∫–∞–∑–≤–∞—Ç —Å–µ –≤ —Å–∏–≥–Ω–∞–ª–∏—Ç–µ
- üìä Accuracy —Å–µ –ø–æ–¥–æ–±—Ä—è–≤–∞ —Å –≤—Å–µ–∫–∏ —Ç—Ä–µ–π–¥
- üéØ –°–ª–µ–¥ 100+ —Ç—Ä–µ–π–¥–∞ ‚Üí 85-90% accuracy
- üíé –°–ª–µ–¥ 500+ —Ç—Ä–µ–π–¥–∞ ‚Üí 90-95% accuracy

---

## üìä –ù–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `/signal` –∫–æ–º–∞–Ω–¥–∞—Ç–∞

–ö–æ–≥–∞—Ç–æ –ø—É—Å–Ω–µ—à `/signal BTC`, —Å–µ–≥–∞ –≤–∏–∂–¥–∞—à:

```
üü¢ –°–ò–ì–ù–ê–õ: BTCUSDT

üìä –ê–Ω–∞–ª–∏–∑ (4h):
–°–∏–≥–Ω–∞–ª: BUY üü¢
–£–≤–µ—Ä–µ–Ω–æ—Å—Ç: 78% üí™

ü§ñ ML –ü–†–û–ì–ù–û–ó–ê: 82.5% (–ú–Ω–æ–≥–æ –¥–æ–±—Ä–∞) ü§ñ‚úÖ
   üí° ML –º–æ–¥–µ–ª –ø–æ–≤–∏—à–∞–≤–∞ —É–≤–µ—Ä–µ–Ω–æ—Å—Ç—Ç–∞ —Å +4%

üí∞ –¢–µ–∫—É—â–∞ —Ü–µ–Ω–∞: $95,234.50
üìà 24—á –ø—Ä–æ–º—è–Ω–∞: +2.3%

[... –æ—Å—Ç–∞–Ω–∞–ª–∏—è—Ç –∞–Ω–∞–ª–∏–∑ ...]
```

**ML –ø—Ä–æ–≥–Ω–æ–∑–∞ –µ–º–æ–¥–∂–∏:**
- ü§ñüíé 80%+ = –û—Ç–ª–∏—á–Ω–∞
- ü§ñ‚úÖ 70-80% = –ú–Ω–æ–≥–æ –¥–æ–±—Ä–∞
- ü§ñüëç 60-70% = –î–æ–±—Ä–∞
- ü§ñ‚ö†Ô∏è 50-60% = –°—Ä–µ–¥–Ω–∞
- ü§ñ‚ùå <50% = –ù–∏—Å–∫–∞

---

## üß™ –¢–µ—Å—Ç–æ–≤–µ

### –¢–µ—Å—Ç –Ω–∞ Environment Variables:
```bash
python test_env.py
```

**–û—á–∞–∫–≤–∞–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç:**
```
‚úÖ –í–°–ò–ß–ö–ò ENVIRONMENT VARIABLES –°–ê –ö–û–†–ï–ö–¢–ù–ò!
üí° –ë–æ—Ç –º–æ–∂–µ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞ —Å .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### –¢–µ—Å—Ç –Ω–∞ ML Predictor:
```bash
python test_ml.py
```

**–ê–∫–æ –Ω—è–º–∞ –¥–∞–Ω–Ω–∏:**
```
‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–∞–Ω–Ω–∏ –∑–∞ –æ–±—É—á–µ–Ω–∏–µ.
üí° –ù—É–∂–Ω–∏ –ø–æ–Ω–µ 10 –∑–∞–≤—ä—Ä—à–µ–Ω–∏ —Ç—Ä–µ–π–¥–∞, –Ω–∞–ª–∏—á–Ω–∏ 0
‚úÖ ML –º–æ–¥–µ–ª —â–µ —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ª–µ–¥ –æ—â–µ 10 —Ç—Ä–µ–π–¥–∞
```

**–°–ª–µ–¥ 50+ —Ç—Ä–µ–π–¥–∞:**
```
‚úÖ ML –º–æ–¥–µ–ª –µ —Ç—Ä–µ–Ω–∏—Ä–∞–π —É—Å–ø–µ—à–Ω–æ!
üìä Train accuracy: 87.5%
üìä Test accuracy: 82.3%
ü§ñ ML –ü—Ä–æ–≥–Ω–æ–∑–∞: 78.5% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç –∑–∞ —É—Å–ø–µ—Ö
```

---

## üìÇ –ù–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ

```
/workspaces/Crypto-signal-bot/
‚îú‚îÄ‚îÄ .env                    # Environment variables (–ù–ï quality –≤ GitHub!)
‚îú‚îÄ‚îÄ .env.example            # –®–∞–±–ª–æ–Ω –∑–∞ .env —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ ml_predictor.py         # ML –º–æ–¥—É–ª (370 —Ä–µ–¥–∞)
‚îú‚îÄ‚îÄ ml_model.pkl            # –¢—Ä–µ–Ω–∏—Ä–∞–π ML –º–æ–¥–µ–ª (–≥–µ–Ω–µ—Ä–∏—Ä–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îú‚îÄ‚îÄ test_env.py             # –¢–µ—Å—Ç –∑–∞ .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ test_ml.py              # –¢–µ—Å—Ç –∑–∞ ML predictor
‚îî‚îÄ‚îÄ UPGRADE_GUIDE.md        # –¢–æ–∑–∏ —Ñ–∞–π–ª
```

---

## üîÑ Deployment –Ω–∞ Production (DigitalOcean)

### 1. –ö–æ–ø–∏—Ä–∞–π .env –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞:
```bash
# –û—Ç –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –º–∞—à–∏–Ω–∞
scp .env root@167.172.34.181:/root/Crypto-signal-bot/

# –ò–ª–∏ —Ä—ä—á–Ω–æ —Å—ä–∑–¥–∞–π –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞
ssh root@167.172.34.181
cd /root/Crypto-signal-bot
nano .env
# (–∫–æ–ø–∏—Ä–∞–π —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –æ—Ç .env.example –∏ –ø–æ–ø—ä–ª–Ω–∏)
```

### 2. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π –Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
ssh root@167.172.34.181
cd /root/Crypto-signal-bot
source venv/bin/activate
pip install python-dotenv scikit-learn joblib
```

### 3. –û–±–Ω–æ–≤–∏ –∫–æ–¥–∞:
```bash
# –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—à git
git pull origin main

# –ò–ª–∏ –∫–∞—á–∏ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Ä—ä—á–Ω–æ
scp bot.py ml_predictor.py root@167.172.34.181:/root/Crypto-signal-bot/
```

### 4. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –±–æ—Ç–∞:
```bash
systemctl restart crypto-bot
systemctl status crypto-bot
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ—Ç–µ:
```bash
journalctl -u crypto-bot -f
```

**–û—á–∞–∫–≤–∞–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è:**
```
‚úÖ ML Predictor loaded successfully
‚úÖ Environment variables –∑–∞—Ä–µ–¥–µ–Ω –æ—Ç .env
INFO - Bot started successfully
```

---

## üéØ –û—á–∞–∫–≤–∞–Ω–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è

### –°–∏–≥—É—Ä–Ω–æ—Å—Ç:
- ‚úÖ Tokens –∑–∞—â–∏—Ç–µ–Ω–∏ –æ—Ç GitHub leaks
- ‚úÖ –õ–µ—Å–Ω–∞ —Å–º—è–Ω–∞ –Ω–∞ credentials
- ‚úÖ Production vs Development —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ

### Accuracy:
- üìä **–°–ª–µ–¥ 50 —Ç—Ä–µ–π–¥–∞:** 75-80% ML accuracy
- üìä **–°–ª–µ–¥ 100 —Ç—Ä–µ–π–¥–∞:** 80-85% ML accuracy
- üìä **–°–ª–µ–¥ 200 —Ç—Ä–µ–π–¥–∞:** 85-90% ML accuracy
- üìä **–°–ª–µ–¥ 500+ —Ç—Ä–µ–π–¥–∞:** 90-95% ML accuracy

### Win Rate –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ:
- –¢–µ–∫—É—â win rate: ~75-80% (—Å–∞–º–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑)
- –° ML –ø—Ä–æ–≥–Ω–æ–∑–∏: **82-87%** (—Å–ª–µ–¥ 100 —Ç—Ä–µ–π–¥–∞)
- –° ML –∫–æ—Ä–µ–∫—Ü–∏–∏: **88-92%** (—Å–ª–µ–¥ 500 —Ç—Ä–µ–π–¥–∞)

---

## üí° –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏

–í–µ—á–µ –∏–º–∞—à:
1. ‚úÖ Environment Variables (Security)
2. ‚úÖ ML Model (Auto-learning)

–û—Å—Ç–∞–≤–∞—Ç:
3. ‚è≥ Unit Tests (Quality assurance)
4. ‚è≥ Redis Cache (Scalability)
5. ‚è≥ Web Dashboard (Visualization)

**–ì–æ—Ç–æ–≤ —Å–∏ –∑–∞ production —Å ML self-learning! üöÄ**

---

## üêõ Troubleshooting

### ML –º–æ–¥–µ–ª –Ω–µ —Å–µ —Ç—Ä–µ–π–Ω–∏:
```
‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –¥–∞–Ω–Ω–∏ –∑–∞ –æ–±—É—á–µ–Ω–∏–µ
```
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑—á–∞–∫–∞–π 50+ –∑–∞–≤—ä—Ä—à–µ–Ω–∏ —Ç—Ä–µ–π–¥–∞ (TP –∏–ª–∏ SL hit)

### Environment variables –Ω–µ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç:
```
‚ùå TELEGRAM_BOT_TOKEN –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω –≤ .env —Ñ–∞–π–ª–∞!
```
**–†–µ—à–µ–Ω–∏–µ:** 
```bash
cp .env.example .env
nano .env  # –ø–æ–ø—ä–ª–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ
```

### ML –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:
```
‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ ML –ø—Ä–æ–≥–Ω–æ–∑–∞: ...
```
**–†–µ—à–µ–Ω–∏–µ:** ML –º–æ–¥–µ–ª —Ä–∞–±–æ—Ç–∏ —Å–∞–º–æ –∞–∫–æ –µ —Ç—Ä–µ–Ω–∏—Ä–∞–π. –ü—Ä–æ–≤–µ—Ä–∏:
```bash
python test_ml.py
```

---

**–î–∞—Ç–∞:** 25 –ù–æ–µ–º–≤—Ä–∏ 2025  
**–í–µ—Ä—Å–∏—è:** 2.1  
**–ê–≤—Ç–æ—Ä:** Crypto Signal Bot  
**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (9.5/10) ‚Üí –í–µ—á–µ —Å ML –∏ Security!
