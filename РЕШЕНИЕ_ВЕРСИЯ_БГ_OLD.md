# üîß –†–ï–®–ï–ù–ò–ï: –í–µ—Ä—Å–∏—è—Ç–∞ –Ω–∞ –±–æ—Ç–∞ –Ω–µ —Å–µ –æ–±–Ω–æ–≤—è–≤–∞ —Å–ª–µ–¥ deploy

## üìã –ü—Ä–æ–±–ª–µ–º
–î–µ–ø–ª–æ–π–≤–∞—à –ø—Ä–æ–º–µ–Ω–∏ –≤ 19:40, –Ω–æ –≤ Telegram –±–æ—Ç—ä—Ç –ø–æ–∫–∞–∑–≤–∞ —Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å–∏—è –∑–∞—â–æ—Ç–æ:

1. **Python –∫–µ—à**: Python –∑–∞—Ä–µ–∂–¥–∞ –º–æ–¥—É–ª–∏—Ç–µ –≤ –ø–∞–º–µ—Ç—Ç–∞ –∏ –≥–∏ –∑–∞–ø–∞–∑–≤–∞ —Ç–∞–º
2. **–ü—Ä–æ—Ü–µ—Å—ä—Ç –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏**: –î–æ—Ä–∏ —Å–ª–µ–¥ –∏–∑—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ `__pycache__`, —Å—Ç–∞—Ä–∏—è—Ç –∫–æ–¥ –æ—Å—Ç–∞–≤–∞ –≤ –ø–∞–º–µ—Ç—Ç–∞ –Ω–∞ –ø—Ä–æ—Ü–µ—Å–∞
3. **–ù–µ–ø—ä–ª–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç**: `systemctl restart` –Ω–µ –≤–∏–Ω–∞–≥–∏ —É–±–∏–≤–∞ –≤—Å–∏—á–∫–∏ Python –ø—Ä–æ—Ü–µ—Å–∏
4. **Bytecode —Ñ–∞–π–ª–æ–≤–µ**: `.pyc` —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –æ—Ç–Ω–æ–≤–æ –¥–æ—Ä–∏ —Å–ª–µ–¥ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –∫–æ–¥–∞

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–¥–æ–±—Ä–µ–Ω Deployment Workflow
**–ö–∞–∫–≤–æ —Å–µ –ø—Ä–æ–º–µ–Ω—è:**
```bash
# –°–¢–ê–†–û (–Ω–µ —Ä–∞–±–æ—Ç–∏ –¥–æ–±—Ä–µ):
systemctl restart crypto-bot  # –ú–æ–∂–µ –¥–∞ –Ω–µ —É–±–∏–µ –≤—Å–∏—á–∫–∏ –ø—Ä–æ—Ü–µ—Å–∏

# –ù–û–í–ê –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–ù–û–°–¢ (—Ä–∞–±–æ—Ç–∏!):
systemctl stop crypto-bot     # –°–ø—Ä–∏ —Å—ä—Ä–≤–∏—Å–∞
pkill -9 -f "python.*bot.py"  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª–Ω–æ —É–±–∏–π –≤—Å–∏—á–∫–∏ Python –ø—Ä–æ—Ü–µ—Å–∏
sleep 2                        # –ò–∑—á–∞–∫–∞–π
systemctl daemon-reload        # –û–±–Ω–æ–≤–∏ systemd –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
systemctl start crypto-bot     # –°—Ç–∞—Ä—Ç–∏—Ä–∞–π —á–∏—Å—Ç–æ
```

**–†–µ–∑—É–ª—Ç–∞—Ç:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ —É–±–∏–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ä–∏ –ø—Ä–æ—Ü–µ—Å–∏ –∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ —Å –Ω–æ–≤ –∫–æ–¥.

### 2. –ù–æ–≤–∞ Systemd Service –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–î–æ–±–∞–≤–µ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```ini
Environment="PYTHONDONTWRITEBYTECODE=1"  # –ù–µ —Å—ä–∑–¥–∞–≤–∞–π .pyc —Ñ–∞–π–ª–æ–≤–µ
Environment="PYTHONUNBUFFERED=1"         # –î–∏—Ä–µ–∫—Ç–µ–Ω output –≤ –ª–æ–≥–æ–≤–µ

ExecStartPre=/bin/sh -c 'pkill -9 -f "python.*bot.py" || true'  # –ò–∑—á–∏—Å—Ç–∏ –ø—Ä–µ–¥–∏ —Å—Ç–∞—Ä—Ç

KillMode=mixed            # –£–±–∏–π —Ü—è–ª–∞—Ç–∞ –ø—Ä–æ—Ü–µ—Å –≥—Ä—É–ø–∞
KillSignal=SIGTERM        # Graceful shutdown
TimeoutStopSec=10         # –ú–∞–∫—Å–∏–º—É–º 10 —Å–µ–∫ –∑–∞ —Å–ø–∏—Ä–∞–Ω–µ
```

**–†–µ–∑—É–ª—Ç–∞—Ç:** –ù—è–º–∞ –ø–æ–≤–µ—á–µ `.pyc` –∫–µ—à —Ñ–∞–π–ª–æ–≤–µ –∏ –≤–∏–Ω–∞–≥–∏ —á–∏—Å—Ç —Å—Ç–∞—Ä—Ç.

### 3. –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –í—Ä–µ–º–µ –Ω–∞ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
**–í bot.py:**
```python
BOT_START_TIME = datetime.now(timezone.utc)  # –ó–∞–ø–∏—Å–≤–∞ –∫–æ–≥–∞ –µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω –ø—Ä–æ—Ü–µ—Å–∞
```

**–í /version –∫–æ–º–∞–Ω–¥–∞:**
```
‚è∞ Bot Process Started: 2025-12-12 20:15:30 UTC
‚è±Ô∏è Uptime: 0:05:23
```

**–†–µ–∑—É–ª—Ç–∞—Ç:** –í–∏–∂–¥–∞—à —Ç–æ—á–Ω–æ –∫–æ–≥–∞ –±–æ—Ç—ä—Ç –µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω —Ä–µ–∞–ª–Ω–æ.

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ Service —Ñ–∞–π–ª
Deployment workflow-—ä—Ç —Å–µ–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–ø–∏—Ä–∞ –∞–∫—Ç—É–∞–ª–Ω–∏—è service —Ñ–∞–π–ª –∫—ä–º `/etc/systemd/system/`.

**–†–µ–∑—É–ª—Ç–∞—Ç:** –ù–µ —Ç—Ä—è–±–≤–∞ —Ä—ä—á–Ω–æ –¥–∞ –∫–æ–ø–∏—Ä–∞—à service —Ñ–∞–π–ª–∞.

## üéØ –ö–∞–∫ –¥–∞ –ø—Ä–æ–≤–µ—Ä—è –¥–∞–ª–∏ —Ä–∞–±–æ—Ç–∏?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í Telegram
```
/version
```

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à:
- ‚úÖ **Bot Process Started** - —Å–∫–æ—Ä–æ—à–Ω–∞ –¥–∞—Ç–∞/—á–∞—Å (–Ω—è–∫–æ–ª–∫–æ –º–∏–Ω—É—Ç–∏ –ø—Ä–µ–¥–∏ —Ç–æ–≤–∞)
- ‚úÖ **Uptime** - –º–∞–ª–∫–æ –≤—Ä–µ–º–µ (5-10 –º–∏–Ω—É—Ç–∏)
- ‚úÖ **Last Deploy** - —Å—ä–≤–ø–∞–¥–∞ —Å GitHub Actions deploy –≤—Ä–µ–º–µ—Ç–æ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞ —Å—ä—Ä–≤—ä—Ä–∞
```bash
ssh root@YOUR_SERVER_IP

# –í–∏–∂ –∫–æ–≥–∞ –µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω –ø—Ä–æ—Ü–µ—Å–∞
ps -p $(pgrep -f "python.*bot.py") -o lstart=

# –í–∏–∂ deployment info
cat /root/Crypto-signal-bot/.deployment-info

# –í–∏–∂ —Å—Ç–∞—Ç—É—Å
systemctl status crypto-bot
```

## üìù –ö–∞–∫–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤—è –°–ï–ì–ê?

### –°—Ç—ä–ø–∫–∞ 1: Merge –Ω–∞ —Ç–æ–∑–∏ PR
–í GitHub:
1. –û—Ç–∏–¥–∏ –Ω–∞ Pull Requests
2. –ù–∞–º–µ—Ä–∏ —Ç–æ–∑–∏ PR: "Fix bot version sync issue"
3. –ù–∞—Ç–∏—Å–Ω–∏ "Merge pull request"

### –°—Ç—ä–ø–∫–∞ 2: –ò–∑—á–∞–∫–∞–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω deploy (–ò–õ–ò)
- GitHub Actions —â–µ –¥–µ–ø–ª–æ–π–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ª–µ–¥ merge
- –©–µ –ø–æ–ª—É—á–∏—à Telegram –∏–∑–≤–µ—Å—Ç–∏–µ –∫–æ–≥–∞—Ç–æ –ø—Ä–∏–∫–ª—é—á–∏

### –°—Ç—ä–ø–∫–∞ 3: –ü—Ä–æ–≤–µ—Ä–∏ /version
–í Telegram –Ω–∞–ø–∏—à–∏:
```
/version
```

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à –∞–∫—Ç—É–∞–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è!

## üîÑ –ö–∞–∫–≤–æ —Å—Ç–∞–≤–∞ –ø—Ä–∏ —Å–ª–µ–¥–≤–∞—â deploy?

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω –ø—Ä–æ—Ü–µ—Å:
1. **Git pull** - –∏–∑—Ç–µ–≥–ª—è –Ω–æ–≤ –∫–æ–¥
2. **–ò–∑—Ç—Ä–∏–≤–∞ cache** - –ø—Ä–µ–º–∞—Ö–≤–∞ `__pycache__` –∏ `.pyc`
3. **–û–±–Ω–æ–≤—è–≤–∞ service** - –∫–æ–ø–∏—Ä–∞ –Ω–æ–≤ service —Ñ–∞–π–ª
4. **–°–ø–∏—Ä–∞ –±–æ—Ç–∞** - `systemctl stop crypto-bot`
5. **–£–±–∏–≤–∞ –ø—Ä–æ—Ü–µ—Å–∏** - `pkill -9 python.*bot.py`
6. **Reload systemd** - `systemctl daemon-reload`
7. **–°—Ç–∞—Ä—Ç–∏—Ä–∞ –±–æ—Ç–∞** - `systemctl start crypto-bot`
8. **–ü—Ä–æ–≤–µ—Ä—è–≤–∞** - –ø–æ–∫–∞–∑–≤–∞ PID –∏ start time
9. **–ò–∑–ø—Ä–∞—â–∞ –∏–∑–≤–µ—Å—Ç–∏–µ** - –≤ Telegram —Å —Ä–µ–∑—É–ª—Ç–∞—Ç–∞

### –†–µ–∑—É–ª—Ç–∞—Ç:
‚è±Ô∏è 2-3 –º–∏–Ω—É—Ç–∏ —Å–ª–µ–¥ deploy –±–æ—Ç—ä—Ç –µ —Å –Ω–æ–≤ –∫–æ–¥ –∏ –ø–æ–∫–∞–∑–≤–∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è!

## üö® –ê–∫–æ –Ω–µ—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏

### –ü—Ä–æ–±–ª–µ–º: –°–ª–µ–¥ deploy –≤—Å–µ –æ—â–µ –≤–∏–∂–¥–∞–º —Å—Ç–∞—Ä–∞ –≤–µ—Ä—Å–∏—è

**–†–µ—à–µ–Ω–∏–µ 1: –†—ä—á–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç**
```bash
ssh root@YOUR_SERVER_IP
cd /root/Crypto-signal-bot

# –°–ø—Ä–∏ –≤—Å–∏—á–∫–æ
systemctl stop crypto-bot
pkill -9 -f "python.*bot.py"
sleep 2

# –ò–∑—á–∏—Å—Ç–∏ cache
find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true
find . -name "*.pyc" -delete

# –°—Ç–∞—Ä—Ç–∏—Ä–∞–π —á–∏—Å—Ç–æ
systemctl daemon-reload
systemctl start crypto-bot

# –ü—Ä–æ–≤–µ—Ä–∏
systemctl status crypto-bot
```

**–†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∏ service —Ñ–∞–π–ª**
```bash
# –í–∏–∂ –¥–∞–ª–∏ service —Ñ–∞–π–ª—ä—Ç –µ –æ–±–Ω–æ–≤–µ–Ω
cat /etc/systemd/system/crypto-bot.service | grep PYTHONDONTWRITEBYTECODE

# –ê–∫–æ –Ω–µ –ø–æ–∫–∞–∑–≤–∞ –Ω–∏—â–æ, –∫–æ–ø–∏—Ä–∞–π —Ä—ä—á–Ω–æ:
cp /root/Crypto-signal-bot/crypto-signal-bot.service /etc/systemd/system/crypto-bot.service
systemctl daemon-reload
systemctl restart crypto-bot
```

### –ü—Ä–æ–±–ª–µ–º: –ë–æ—Ç—ä—Ç –Ω–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í–∏–∂ –ª–æ–≥–æ–≤–µ—Ç–µ
journalctl -u crypto-bot -n 50

# –¢–µ—Å—Ç–≤–∞–π —Ä—ä—á–Ω–æ
cd /root/Crypto-signal-bot
source venv/bin/activate
python bot.py
```

### –ü—Ä–æ–±–ª–µ–º: –ú–Ω–æ–≥–æ bot.py –ø—Ä–æ—Ü–µ—Å–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–∏–π –≤—Å–∏—á–∫–æ
pkill -9 -f "python.*bot.py"

# –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π —á–∏—Å—Ç–æ
systemctl start crypto-bot
```

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### –ó–∞—â–æ —Å—Ç–∞—Ä–∏—è –Ω–∞—á–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–µ—à–µ?

**–ü—Ä–æ–±–ª–µ–º —Å `systemctl restart`:**
```bash
systemctl restart crypto-bot
# ‚Üì –¢–æ–≤–∞ –ø—Ä–∞–≤–∏:
# 1. systemctl stop crypto-bot  ‚Üí –∏–∑–ø—Ä–∞—â–∞ SIGTERM
# 2. –ò–∑—á–∞–∫–≤–∞ –ø—Ä–æ—Ü–µ—Å—ä—Ç –¥–∞ —Å–ø—Ä–µ
# 3. systemctl start crypto-bot
# 
# –ü–†–û–ë–õ–ï–ú: Python –º–æ–∂–µ –¥–∞ –∏–º–∞ child –ø—Ä–æ—Ü–µ—Å–∏ –∫–æ–∏—Ç–æ 
# –Ω–µ —Å–µ —É–±–∏–≤–∞—Ç –Ω–∞–ø—ä–ª–Ω–æ –∏ –∑–∞–ø–∞–∑–≤–∞—Ç —Å—Ç–∞—Ä –∫–æ–¥ –≤ –ø–∞–º–µ—Ç—Ç–∞
```

**–†–µ—à–µ–Ω–∏–µ —Å force kill:**
```bash
systemctl stop crypto-bot
pkill -9 -f "python.*bot.py"  # SIGKILL - –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞
sleep 2                        # –°–∏–≥—É—Ä–Ω–æ—Å—Ç
systemctl start crypto-bot
# 
# –†–ï–ó–£–õ–¢–ê–¢: 100% –≥–∞—Ä–∞–Ω—Ü–∏—è —á–µ –Ω—è–º–∞ —Å—Ç–∞—Ä–∏ –ø—Ä–æ—Ü–µ—Å–∏
```

### –ó–∞—â–æ PYTHONDONTWRITEBYTECODE=1?

Python –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞ `.pyc` (bytecode) —Ñ–∞–π–ª–æ–≤–µ:
```
bot.py ‚Üí –∫–æ–º–ø–∏–ª–∏—Ä–∞ —Å–µ ‚Üí __pycache__/bot.cpython-312.pyc
```

–¢–µ–∑–∏ `.pyc` —Ñ–∞–π–ª–æ–≤–µ:
- ‚ùå –ú–æ–≥–∞—Ç –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –≤–º–µ—Å—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è `.py` —Ñ–∞–π–ª
- ‚ùå –û—Å—Ç–∞–≤–∞—Ç –¥–æ—Ä–∏ —Å–ª–µ–¥ `git pull`
- ‚ùå –°—ä–¥—ä—Ä–∂–∞—Ç —Å—Ç–∞—Ä –∫–æ–¥

–° `PYTHONDONTWRITEBYTECODE=1`:
- ‚úÖ Python –ù–ï —Å—ä–∑–¥–∞–≤–∞ `.pyc` —Ñ–∞–π–ª–æ–≤–µ
- ‚úÖ –í–∏–Ω–∞–≥–∏ —á–µ—Ç–µ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è `.py` —Ñ–∞–π–ª
- ‚úÖ –í–∏–Ω–∞–≥–∏ —Ä–∞–±–æ—Ç–∏ —Å –Ω–∞–π-–Ω–æ–≤ –∫–æ–¥

## üéì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ü—Ä–µ–¥–∏ —Ç–æ–≤–∞:
```
Deploy ‚Üí git pull ‚Üí systemctl restart ‚Üí ‚ö†Ô∏è –°—Ç–∞—Ä –∫–æ–¥ –≤ –ø–∞–º–µ—Ç—Ç–∞
```

### –°–µ–≥–∞:
```
Deploy ‚Üí git pull ‚Üí stop ‚Üí kill ‚Üí reload ‚Üí start ‚Üí ‚úÖ –ß–∏—Å—Ç –Ω–æ–≤ –∫–æ–¥
```

### –†–µ–∑—É–ª—Ç–∞—Ç:
- ‚úÖ –í–µ—Ä—Å–∏—è—Ç–∞ –í–ò–ù–ê–ì–ò —Å–µ –æ–±–Ω–æ–≤—è–≤–∞
- ‚úÖ –ù—è–º–∞ Python cache –ø—Ä–æ–±–ª–µ–º–∏
- ‚úÖ –ß–∏—Å—Ç–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤–µ
- ‚úÖ –í–∏–∂–¥–∞—à —Ç–æ—á–Ω–æ –∫–æ–≥–∞ –µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω –±–æ—Ç–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω deploy —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ê–∫–æ –∏–º–∞—à –≤—ä–ø—Ä–æ—Å–∏ –∏–ª–∏ –Ω–µ—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏:
1. –ü—Ä–æ–≤–µ—Ä–∏ `/version` –≤ Telegram
2. –í–∏–∂ –ª–æ–≥–æ–≤–µ—Ç–µ: `journalctl -u crypto-bot -n 50`
3. –ü—Ä–æ—á–µ—Ç–∏ `DEPLOYMENT_VERSION_SYNC.md` –∑–∞ –¥–µ—Ç–∞–π–ª–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∑–∞ merge –∏ deploy  
**–¢–µ—Å—Ç–≤–∞–Ω–æ:** ‚úÖ –í—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø—Ä–µ–º–∏–Ω–∞–≤–∞—Ç  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ‚úÖ –ü—ä–ª–Ω–∞  
**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** ‚úÖ 100%

üöÄ **–°–ª–µ–¥–≤–∞—â deploy —â–µ —Ä–∞–±–æ—Ç–∏ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–æ!**
