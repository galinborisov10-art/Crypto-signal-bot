# üêï Bot Watchdog - –°–∏—Å—Ç–µ–º–∞ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ

## üéØ –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏?

**Watchdog –µ "–ø–∞–∑–∞—á –Ω–∞ –±–æ—Ç–∞"** –∫–æ–π—Ç–æ –≥–æ –Ω–∞–±–ª—é–¥–∞–≤–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–æ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞ –∞–∫–æ —Å–ø—Ä–µ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è.

---

## ‚ùì –ó–∞—â–æ –µ –Ω—É–∂–µ–Ω?

### –ü—Ä–æ–±–ª–µ–º–∏ –∫–æ–∏—Ç–æ —Ä–µ—à–∞–≤–∞:

1. **üî¥ –ë–æ—Ç –∑–∞–º—Ä—ä–∑–≤–∞** - –ü—Ä–æ—Ü–µ—Å—ä—Ç —Ä–∞–±–æ—Ç–∏, –Ω–æ –Ω–µ –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ –∫–æ–º–∞–Ω–¥–∏
2. **‚è∏Ô∏è Codespace –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç** - GitHub Codespace –ø–∞—É–∑–∏—Ä–∞ –ø—Ä–æ—Ü–µ—Å–∏ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç
3. **üí§ –ë—É—Ç–æ–Ω–∏—Ç–µ —Å—Ç–∞–≤–∞—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏** - Telegram –≥—É–±–∏ –≤—Ä—ä–∑–∫–∞ —Å –±–æ—Ç–∞
4. **üìâ –ú—Ä–µ–∂–æ–≤–∏ –ø—Ä–æ–±–ª–µ–º–∏** - –í—Ä–µ–º–µ–Ω–Ω–∞ –∑–∞–≥—É–±–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤—Ä—ä–∑–∫–∞
5. **üêõ Memory leaks** - –ë–∞–≤–Ω–æ –Ω–∞—Ç—Ä—É–ø–≤–∞–Ω–µ –Ω–∞ –ø–∞–º–µ—Ç –¥–æ–∫–∞—Ç–æ –ø—Ä–æ—Ü–µ—Å—ä—Ç —Å–µ "–∑–∞—Ü–∏–∫–ª–∏"

---

## üõ†Ô∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∏?

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤—Å–µ–∫–∏ 2 –º–∏–Ω—É—Ç–∏:

1. **üìç PID –ø—Ä–æ–≤–µ—Ä–∫–∞** - –î–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
2. **üíì Process health** - –î–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—ä—Ç –æ—Ç–≥–æ–≤–∞—Ä—è
3. **üìù Log activity** - –ò–º–∞ –ª–∏ –Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 5 –º–∏–Ω—É—Ç–∏
4. **üåê Telegram API** - –î–∞–ª–∏ –±–æ—Ç—ä—Ç –µ —Å–≤—ä—Ä–∑–∞–Ω —Å Telegram
5. **üîÑ Auto-restart** - –ê–∫–æ –Ω–µ—â–æ –Ω–µ –µ –Ω–∞—Ä–µ–¥ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç

### –ü—Ä–∏ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º:

```
‚ö†Ô∏è –û—Ç–∫—Ä–∏—Ç –ø—Ä–æ–±–ª–µ–º ‚Üí 
   üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç –Ω–∞ –±–æ—Ç–∞ ‚Üí
      üí¨ –ò–∑–≤–µ—Å—Ç–∏–µ –¥–æ owner –≤ Telegram ‚Üí
         ‚úÖ –í—Å–∏—á–∫–æ –æ—Ç–Ω–æ–≤–æ —Ä–∞–±–æ—Ç–∏
```

---

## üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
```bash
./watchdog-manager.sh start
```

### –°–ø–∏—Ä–∞–Ω–µ
```bash
./watchdog-manager.sh stop
```

### –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
```bash
./watchdog-manager.sh restart
```

### –°—Ç–∞—Ç—É—Å
```bash
./watchdog-manager.sh status
```

### –ï–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
./watchdog-manager.sh check
```

### –õ–æ–≥–æ–≤–µ
```bash
./watchdog-manager.sh logs
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `bot_watchdog.py`

**–ò–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```python
CHECK_INTERVAL = 120  # 2 –º–∏–Ω—É—Ç–∏ (–≤ —Å–µ–∫—É–Ω–¥–∏)
```

**Timeout –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç:**
```python
# –ê–∫–æ –Ω—è–º–∞ –ª–æ–≥–æ–≤–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 5 –º–∏–Ω—É—Ç–∏
if time_diff.total_seconds() < 300:  # 5 –º–∏–Ω—É—Ç–∏
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –ª–æ–≥–æ–≤–µ

### –°—Ç–∞—Ç—É—Å –Ω–∞ watchdog
```bash
./watchdog-manager.sh status
```

**–ü–æ–∫–∞–∑–≤–∞:**
- ‚úÖ –î–∞–ª–∏ —Ä–∞–±–æ—Ç–∏
- üÜî Process ID
- üíª CPU –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
- üß† Memory –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
- ‚è±Ô∏è Uptime
- üìù –ü–æ—Å–ª–µ–¥–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –ª–æ–≥–æ–≤–µ
```bash
tail -f /workspaces/Crypto-signal-bot/watchdog.log
```

### –£—Å–ø–µ—à–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
grep "–í—Å–∏—á–∫–æ –µ –Ω–∞—Ä–µ–¥" /workspaces/Crypto-signal-bot/watchdog.log | tail -10
```

### –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–∏—è
```bash
grep "—Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω" /workspaces/Crypto-signal-bot/watchdog.log
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ

Watchdog —Å–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –ø—Ä–∏:

1. ‚úÖ –û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –Ω–æ–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª (–ø—Ä–µ–∑ `.bashrc`)
2. ‚úÖ –†–µ—Å—Ç–∞—Ä—Ç –Ω–∞ Codespace
3. ‚úÖ –°–ª–µ–¥ logout/login

**–ù–µ –µ –Ω—É–∂–Ω–æ** –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—à —Ä—ä—á–Ω–æ!

Autostart —Å–∫—Ä–∏–ø—Ç: `auto-fixer-autostart.sh`

---

## üìÅ –§–∞–π–ª–æ–≤–µ

```
/workspaces/Crypto-signal-bot/
‚îú‚îÄ‚îÄ bot_watchdog.py            # –ì–ª–∞–≤–µ–Ω watchdog —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ watchdog-manager.sh        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (start/stop/status)
‚îú‚îÄ‚îÄ watchdog.pid               # PID —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ watchdog.log               # –õ–æ–≥–æ–≤–µ
```

---

## üéØ –ü—Ä–∏–º–µ—Ä–Ω–∞ —Ä–∞–±–æ—Ç–∞

```
2025-11-23 17:12:28 - INFO - ============================================================
2025-11-23 17:12:28 - INFO - üîç WATCHDOG CHECK
2025-11-23 17:12:28 - INFO - ============================================================
2025-11-23 17:12:28 - INFO - üìç Bot PID: 1076
2025-11-23 17:12:28 - INFO - ‚úÖ –ü—Ä–æ—Ü–µ—Å—ä—Ç —Ä–∞–±–æ—Ç–∏
2025-11-23 17:12:28 - INFO - ‚úÖ –°–∫–æ—Ä–æ—à–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: 45s ago
2025-11-23 17:12:28 - INFO - ‚úÖ Bot API –æ—Ç–≥–æ–≤–∞—Ä—è
2025-11-23 17:12:28 - INFO - ‚úÖ –í—Å–∏—á–∫–æ –µ –Ω–∞—Ä–µ–¥
2025-11-23 17:12:28 - INFO - ============================================================
2025-11-23 17:12:28 - INFO - ‚è≥ –°–ª–µ–¥–≤–∞—â–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–µ–¥ 2 –º–∏–Ω—É—Ç–∏...
```

**–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º:**
```
2025-11-23 17:15:00 - WARNING - ‚ö†Ô∏è –ù—è–º–∞ —Å–∫–æ—Ä–æ—à–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –≤ –ª–æ–≥–æ–≤–µ—Ç–µ
2025-11-23 17:15:00 - ERROR - ‚ùå –ë–æ—Ç—ä—Ç –ù–ï –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ API - —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–º
2025-11-23 17:15:00 - WARNING - üîÑ –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –±–æ—Ç–∞...
2025-11-23 17:15:05 - INFO - ‚úÖ –ë–æ—Ç—ä—Ç –µ —É—Å–ø–µ—à–Ω–æ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω
```

---

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Auto-fixer

**Watchdog —Ä–∞–±–æ—Ç–∏ –ó–ê–ï–î–ù–û —Å Auto-fixer:**

| –°–∏—Å—Ç–µ–º–∞ | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –§—É–Ω–∫—Ü–∏—è |
|---------|----------|---------|
| **Watchdog** | 2 –º–∏–Ω—É—Ç–∏ | –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –±–æ—Ç—ä—Ç –û–¢–ì–û–í–ê–†–Ø |
| **Auto-fixer** | 15 –º–∏–Ω—É—Ç–∏ | –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –∑–∞ –ì–†–ï–®–ö–ò –∏ –≥–∏ –æ—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞ |

**–ó–∞–µ–¥–Ω–æ = 100% –Ω–∞–¥–µ–∂–¥–Ω–æ—Å—Ç!** üõ°Ô∏è

---

## ‚ö° –ò–∑–≤–µ—Å—Ç–∏—è –≤ Telegram

–ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Ä–µ—Å—Ç–∞—Ä—Ç –ø–æ–ª—É—á–∞–≤–∞—à –∏–∑–≤–µ—Å—Ç–∏–µ:

```
ü§ñ Watchdog Alert

‚ö†Ô∏è –ë–æ—Ç—ä—Ç –±–µ—à–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω –æ—Ç Watchdog 
   –ø–æ—Ä–∞–¥–∏ –ª–∏–ø—Å–∞ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä.
```

---

## üîß Troubleshooting

### Watchdog –Ω–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞
```bash
# –†—ä—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
python3 /workspaces/Crypto-signal-bot/bot_watchdog.py once

# –ü—Ä–æ–≤–µ—Ä–∏ –≥—Ä–µ—à–∫–∏
tail -f /workspaces/Crypto-signal-bot/watchdog.log
```

### –¢–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–∏—è
```bash
# –í–∏–∂ –∑–∞—â–æ
grep "—Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω" /workspaces/Crypto-signal-bot/watchdog.log

# –£–≤–µ–ª–∏—á–∏ timeout (–≤ bot_watchdog.py)
if time_diff.total_seconds() < 600:  # 10 –º–∏–Ω—É—Ç–∏
```

### Watchdog –Ω–µ –Ω–∞–º–∏—Ä–∞ –±–æ—Ç–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏ PID —Ñ–∞–π–ª–∞
cat /workspaces/Crypto-signal-bot/bot.pid

# –ü—Ä–æ–≤–µ—Ä–∏ –ø—Ä–æ—Ü–µ—Å–∞
ps aux | grep "python3.*bot.py"
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–°–µ–≥–∞ –∏–º–∞—à **3-—Å—Ç–µ–ø–µ–Ω–Ω–∞ –∑–∞—â–∏—Ç–∞**:

1. ü§ñ **Bot** - –û—Å–Ω–æ–≤–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç
2. üîß **Auto-fixer** - –û—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞ –≥—Ä–µ—à–∫–∏ –Ω–∞ –≤—Å–µ–∫–∏ 15 –º–∏–Ω
3. üêï **Watchdog** - –í—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞ –±–æ—Ç–∞ –Ω–∞ –≤—Å–µ–∫–∏ 2 –º–∏–Ω

**–ë–æ—Ç—ä—Ç –≤–µ—á–µ –Ω—è–º–∞ –¥–∞ —Å–ø–∏—Ä–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏!** üöÄ

---

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ü—Ä–∏ –≤—ä–ø—Ä–æ—Å–∏ –ø—Ä–æ–≤–µ—Ä–∏:

1. **–°—Ç–∞—Ç—É—Å:**
   ```bash
   ./watchdog-manager.sh status
   ```

2. **–õ–æ–≥–æ–≤–µ:**
   ```bash
   ./watchdog-manager.sh logs
   ```

3. **–ï–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   ```bash
   ./watchdog-manager.sh check
   ```
